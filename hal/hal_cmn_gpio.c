/**************************************************************************//*!
 *  @file           hal_cmn_gpio.c
 *  @brief          [HAL] GPIO の共通 API を定義したファイル。
 *************************************************************************** */
#ifdef __cplusplus
    extern "C"{
#endif


//********************************************************
/* include                                               */
//********************************************************
#include <wiringPi.h>

#include "hal_cmn.h"


//#define DBG_PRINT
#define MY_NAME "HAL"
#include "../app/log/log.h"


//********************************************************
/*! @def                                                 */
//********************************************************
// なし


//********************************************************
/*! @enum                                                */
//********************************************************
// なし


//********************************************************
/*! @struct                                              */
//********************************************************
// なし


//********************************************************
/* モジュールグローバル変数                              */
//********************************************************
// なし


//********************************************************
/* 関数プロトタイプ宣言                                  */
//********************************************************
static void         InitParam( void );
static EHalBool_t   InitReg( void );




/**************************************************************************//*!
 * @brief     ファイルスコープ内のグローバル変数を初期化する。
 *************************************************************************** */
static void
InitParam(
    void  ///< [in] ナシ
){
    DBG_PRINT_TRACE( "\n\r" );
    return;
}


/**************************************************************************//*!
 * @brief     H/W レジスタを初期化する。
 *************************************************************************** */
static EHalBool_t
InitReg(
    void  ///< [in] ナシ
){
    EHalBool_t      ret = EN_FALSE;
    int             res = 0;

    DBG_PRINT_TRACE( "\n\r" );

    res = wiringPiSetupGpio();
    if( res != -1 )
    {
        ret = EN_TRUE;
    }

    return ret;
}


/**************************************************************************//*!
 * @brief     GPIO 設定レジスタへアクセスするためにメモリアドレスを mmap する。
 *************************************************************************** */
EHalBool_t
HalCmnGpio_Init(
    void
){
    EHalBool_t      ret = EN_FALSE;

    DBG_PRINT_TRACE( "\n\r" );

    InitParam();
    ret = InitReg();

    return ret;
}


/**************************************************************************//*!
 * @brief     GPIO レジスタのメモリアドレスを munmap する。
 *************************************************************************** */
void
HalCmnGpio_Fini(
    void
){
    DBG_PRINT_TRACE( "\n\r" );
    return;
}


#ifdef __cplusplus
    }
#endif

